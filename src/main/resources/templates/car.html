<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8"/>
    <title>Страница авто</title>
    <link rel="stylesheet" href="/css/app.css"/>
</head>
<body>

<div th:insert="~{parts/header-menu :: menu}"></div>

<div class="container-fluid">
    <div class="card bg-dark">
        <div class="card-header">
            <div class="row">
                <div class="col-9 row">
                    <div id="div-make" class="header-text ml-3" th:text="${car.make}"></div>
                    <div id="div-model" class="header-text ml-3" th:text="${car.model}"></div>
                    <div id="div-year" class="header-text ml-3" th:text="${car.year}"></div>
                </div>
                <div class="col-3 text-right">
                    <form method="post" th:action="|/cars/${car.id}/pull-info/|">
                        <div class="input-group" sec:authorize="hasAnyAuthority('POWER', 'ADMIN')">
                            <input type="text" name="vinOrLot" class="form-control" placeholder="VIN или № лота"/>
                            <div class="input-group-append">
                                <input type="submit" class="btn btn-outline-warning form-control"
                                       value="Вытащить инфо"/>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="card-body bg-darkgray">
            <div class="row">
                <div class="col">
                    <a href="img/">
                        <img th:src="|/img/${car.currentImg}|" style="max-width: 100%; max-height: 370px;"/>
                    </a>
                </div>
                <div class="col card bg-dark mx-1">
                    <div class="card-header">АВТОМОБИЛЬ</div>
                    <div class="card-body">
                        <table>
                            <tr>
                                <td>Одометр, миль:</td>
                                <td th:text="${car.odometer}"></td>
                            </tr>
                            <tr>
                                <td>Двигатель:</td>
                                <td th:text="${car.engine}"></td>
                            </tr>
                            <tr>
                                <td>Топливо:</td>
                                <td th:text="${car.fuel}"></td>
                            </tr>
                            <tr>
                                <td>Привод:</td>
                                <td th:text="${car.driveLine}"></td>
                            </tr>
                            <tr>
                                <td>Трансмиссия:</td>
                                <td th:text="${car.transmission}"></td>
                            </tr>
                            <tr>
                                <td>Цвет:</td>
                                <td th:text="${car.color}"></td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="col card bg-dark mx-1">
                    <div class="card-header">ПРОИСШЕСТВИЕ</div>
                    <div class="card-body">
                        <table>
                            <tr>
                                <td>Урон:</td>
                                <td th:text="${car.loss}"></td>
                            </tr>
                            <tr>
                                <td>Повреждение:</td>
                                <td th:text="${car.damage}"></td>
                            </tr>
                            <tr>
                                <td>Заводится и едет:</td>
                                <td th:text="${car.runAndDrive}"></td>
                            </tr>
                            <tr>
                                <td>Заводится:</td>
                                <td th:text="${car.starts}"></td>
                            </tr>
                            <tr>
                                <td>Ключи:</td>
                                <td th:text="${car.carKeys}"></td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="col card bg-dark mx-1">
                    <div class="card-header">ОБЩЕЕ</div>
                    <div class="card-body">
                        <table>
                            <tr>
                                <td>Лот:</td>
                                <td th:text="${car.lot}"></td>
                            </tr>
                            <tr>
                                <td>VIN:</td>
                                <td th:text="${car.vin}"></td>
                            </tr>
                            <tr>
                                <td>Расходы:</td>
                                <td class="money" th:text="${car.spending}"></td>
                            </tr>
                            <tr>
                                <td>Выручка:</td>
                                <td class="money" th:text="${car.income}"></td>
                            </tr>
                            <tr>
                                <td>Прибыль:</td>
                                <td class="money" th:text="${car.spending+car.income}"></td>
                            </tr>
                            <tr>
                                <td>+40% от расходов:</td>
                                <td class="money grey-white" th:text="${car.spending*-1+car.spending*-0.4}"></td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-footer">
            <div class="row">
                <div class="col">
                    <button type="button" class="btn btn-outline-light" onclick="goto('../')"><< Выбор авто</button>
                </div>
                <div class="col text-right">
                    <button type="button" class="btn btn-outline-light" onclick="goto('notes/')">Все записи >></button>
                </div>
            </div>
        </div>
    </div>

    <div th:insert="~{parts/new-note :: create}"></div>
</div>

<script src="/js/app.js"></script>
<script src="/js/car.js"></script>
</body>
</html>
