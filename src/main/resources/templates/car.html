<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Страница авто</title>
    <link rel="stylesheet" href="/css/app.css"/>
</head>
<body>

<div th:insert="~{parts/header-menu :: menu}"></div>

<div class="container">
    <div class="card bg-dark">
        <div class="card-header">
            <form method="post" th:action="|/cars/${car.id}/|" th:object="${car}">
                <input type="hidden" name="_method" value="put">
                <input type="hidden" name="_csrf" th:name="${_csrf.token}">
                <input type="hidden" name="location" th:value="${#httpServletRequest.requestURL}">
                <input id="input-make" type="hidden" th:field="*{make}">
                <input id="input-model" type="hidden" th:field="*{model}">
                <div class="row">
                    <div id="div-make" class="header-text ml-3" th:text="${car.make}"></div>
                    <div id="div-model" class="header-text ml-3" th:text="${car.model}"></div>
                    <div class="ml-3" sec:authorize="hasAnyAuthority('POWER', 'ADMIN')">
                        <input type="button" id="btn-edit-carname" class="btn btn-outline-warning" value="<<">
                        <input type="submit" id="btn-submit-carname" class="btn btn-outline-success" value=">>">
                    </div>
                </div>
            </form>
        </div>
        <div class="card-body row">
            <div class="col-8">
                <a href="img/">
                    <img th:src="|/img/${car.imgFilename}|" style="max-width: 100%; max-height: 370px;">
                </a>
            </div>
            <div class="col-4">
                <table>
                    <tr>
                        <td>Расходы:</td>
                        <td class="money" th:text="${car.spending}"></td>
                    </tr>
                    <tr>
                        <td>Выручка:</td>
                        <td class="money" th:text="${car.income}"></td>
                    </tr>
                    <tr>
                        <td>Прибыль:</td>
                        <td class="money" th:text="${car.spending+car.income}"></td>
                    </tr>
                    <tr>
                        <td>+40% от расходов:</td>
                        <td class="money grey-white" th:text="${car.spending*-1+car.spending*-0.4}"></td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="card-footer">
            <div class="row">
                <div class="col">
                    <button type="button" class="btn btn-outline-light" onclick="goto('../')"><< Выбор авто</button>
                </div>
                <div class="col text-right">
                    <button type="button" class="btn btn-outline-light" onclick="goto('notes/')">Все записи >></button>
                </div>
            </div>
        </div>
    </div>

    <div th:insert="~{parts/new-note :: create}"></div>
</div>

<script src="/js/app.js"></script>
<script src="/js/car.js"></script>
</body>
</html>
